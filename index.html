<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>StudyOS ‚Äî Gamified Study Planner</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600;700;800&family=JetBrains+Mono:wght@300;400;500&display=swap" rel="stylesheet" />
</head>
<body>
  <!-- Animated background -->
  <div class="bg-layer" aria-hidden="true">
    <div class="blob blob-1"></div>
    <div class="blob blob-2"></div>
    <div class="blob blob-3"></div>
    <canvas id="particles-canvas"></canvas>
  </div>

  <!-- Sidebar -->
  <aside class="sidebar" id="sidebar" role="navigation" aria-label="Main navigation">
    <div class="sidebar-header">
      <div class="logo">
        <span class="logo-icon">‚óà</span>
        <span class="logo-text">StudyOS</span>
      </div>
      <button class="sidebar-toggle" id="sidebarToggle" aria-label="Toggle sidebar">
        <span class="toggle-icon">‚Äπ</span>
      </button>
    </div>

    <nav class="sidebar-nav">
      <button class="nav-item active" data-view="dashboard" aria-label="Dashboard">
        <span class="nav-icon">‚¨°</span>
        <span class="nav-label">Dashboard</span>
      </button>
      <button class="nav-item" data-view="tasks" aria-label="Tasks">
        <span class="nav-icon">‚ó´</span>
        <span class="nav-label">Tasks</span>
      </button>
      <button class="nav-item" data-view="pomodoro" aria-label="Pomodoro Timer">
        <span class="nav-icon">‚óâ</span>
        <span class="nav-label">Pomodoro</span>
      </button>
      <button class="nav-item" data-view="analytics" aria-label="Analytics">
        <span class="nav-icon">‚óà</span>
        <span class="nav-label">Analytics</span>
      </button>
      <button class="nav-item" data-view="achievements" aria-label="Achievements">
        <span class="nav-icon">‚¨ü</span>
        <span class="nav-label">Achievements</span>
      </button>
    </nav>

    <div class="sidebar-player">
      <div class="player-level-badge">
        <span class="level-num" id="sidebarLevel">1</span>
        <span class="level-label">LVL</span>
      </div>
      <div class="player-info">
        <div class="player-name">Scholar</div>
        <div class="xp-bar-mini">
          <div class="xp-fill-mini" id="xpFillMini"></div>
        </div>
        <div class="xp-text-mini" id="xpTextMini">0 / 100 XP</div>
      </div>
    </div>
  </aside>

  <!-- Main wrapper -->
  <div class="main-wrapper" id="mainWrapper">
    <!-- Top nav -->
    <header class="topnav" role="banner">
      <div class="topnav-left">
        <h1 class="page-title" id="pageTitle">Dashboard</h1>
        <span class="page-subtitle" id="pageSubtitle">Your learning command center</span>
      </div>
      <div class="topnav-right">
        <div class="streak-badge" id="streakBadge" title="Daily Streak">
          <span class="streak-fire">üî•</span>
          <span class="streak-count" id="streakCount">0</span>
        </div>
        <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
          <span class="theme-icon" id="themeIcon">‚óë</span>
        </button>
        <div class="user-avatar" aria-label="User profile">S</div>
      </div>
    </header>

    <!-- Views -->
    <main class="content" role="main">

      <!-- DASHBOARD VIEW -->
      <section class="view active" id="view-dashboard">
        <!-- Stats row -->
        <div class="stats-grid">
          <div class="stat-card glass stagger-1">
            <div class="stat-icon">‚ó´</div>
            <div class="stat-body">
              <div class="stat-value" id="statTotalTasks">0</div>
              <div class="stat-label">Total Tasks</div>
            </div>
            <div class="stat-glow"></div>
          </div>
          <div class="stat-card glass stagger-2">
            <div class="stat-icon">‚úì</div>
            <div class="stat-body">
              <div class="stat-value" id="statCompletedTasks">0</div>
              <div class="stat-label">Completed</div>
            </div>
            <div class="stat-glow"></div>
          </div>
          <div class="stat-card glass stagger-3">
            <div class="stat-icon">‚óâ</div>
            <div class="stat-body">
              <div class="stat-value" id="statPomodoros">0</div>
              <div class="stat-label">Pomodoros</div>
            </div>
            <div class="stat-glow"></div>
          </div>
          <div class="stat-card glass stagger-4">
            <div class="stat-icon">‚¨ü</div>
            <div class="stat-body">
              <div class="stat-value" id="statXP">0</div>
              <div class="stat-label">Total XP</div>
            </div>
            <div class="stat-glow"></div>
          </div>
        </div>

        <!-- Player card + Quick add -->
        <div class="dash-mid-row">
          <div class="player-card glass stagger-2">
            <div class="player-card-header">
              <div class="player-avatar-big">S</div>
              <div class="player-card-info">
                <div class="player-card-name">Scholar</div>
                <div class="player-card-level" id="playerCardLevel">Level 1 ‚Äî Novice</div>
              </div>
            </div>
            <div class="xp-section">
              <div class="xp-label-row">
                <span>XP Progress</span>
                <span id="xpLabel">0 / 100</span>
              </div>
              <div class="xp-bar">
                <div class="xp-fill" id="xpFill"></div>
              </div>
            </div>
            <div class="player-stats-row">
              <div class="pstat">
                <div class="pstat-val" id="pstatStreak">0</div>
                <div class="pstat-label">Streak</div>
              </div>
              <div class="pstat">
                <div class="pstat-val" id="pstatScore">0%</div>
                <div class="pstat-label">Score</div>
              </div>
              <div class="pstat">
                <div class="pstat-val" id="pstatLevel">1</div>
                <div class="pstat-label">Level</div>
              </div>
            </div>
          </div>

          <div class="quick-add-card glass stagger-3">
            <div class="card-title">Quick Add Task</div>
            <div class="quick-form">
              <input type="text" class="input-field" id="quickTaskTitle" placeholder="Task title..." aria-label="Task title" />
              <select class="input-field" id="quickTaskSubject" aria-label="Subject">
                <option value="">Select subject...</option>
              </select>
              <div class="quick-row">
                <input type="date" class="input-field" id="quickTaskDue" aria-label="Due date" />
                <select class="input-field" id="quickTaskPriority" aria-label="Priority">
                  <option value="low">Low</option>
                  <option value="medium" selected>Medium</option>
                  <option value="high">High</option>
                </select>
              </div>
              <input type="number" class="input-field" id="quickTaskTime" placeholder="Est. minutes..." min="1" aria-label="Estimated time" />
              <button class="btn btn-primary" id="quickAddBtn">
                <span>+ Add Task</span>
              </button>
            </div>
          </div>
        </div>

        <!-- Recent tasks -->
        <div class="glass card-section stagger-4">
          <div class="section-header">
            <div class="card-title">Recent Tasks</div>
            <button class="btn btn-ghost" data-view="tasks">View All ‚Üí</button>
          </div>
          <div class="task-list" id="recentTaskList">
            <div class="empty-state">No tasks yet. Add your first task above!</div>
          </div>
        </div>
      </section>

      <!-- TASKS VIEW -->
      <section class="view" id="view-tasks">
        <div class="tasks-toolbar glass">
          <div class="toolbar-left">
            <button class="filter-btn active" data-filter="all">All</button>
            <button class="filter-btn" data-filter="pending">Pending</button>
            <button class="filter-btn" data-filter="completed">Completed</button>
          </div>
          <div class="toolbar-right">
            <select class="input-field input-sm" id="sortSelect" aria-label="Sort tasks">
              <option value="date">Sort: Due Date</option>
              <option value="priority">Sort: Priority</option>
            </select>
            <button class="btn btn-primary btn-sm" id="openAddTaskModal">+ New Task</button>
          </div>
        </div>

        <div class="subjects-container" id="subjectsContainer">
          <div class="empty-state glass">No subjects yet. Add a subject to get started!</div>
        </div>

        <button class="btn btn-ghost add-subject-btn" id="openAddSubjectModal">+ Add Subject</button>
      </section>

      <!-- POMODORO VIEW -->
      <section class="view" id="view-pomodoro">
        <div class="pomo-layout">
          <div class="pomo-card glass">
            <div class="pomo-header">
              <div class="card-title">Pomodoro Timer</div>
              <div class="pomo-session-count">
                Sessions today: <strong id="pomoDaySessions">0</strong>
              </div>
            </div>

            <div class="pomo-ring-wrap">
              <svg class="pomo-ring" viewBox="0 0 200 200" aria-label="Timer progress">
                <circle class="ring-bg" cx="100" cy="100" r="85" />
                <circle class="ring-progress" id="ringProgress" cx="100" cy="100" r="85"
                  stroke-dasharray="534" stroke-dashoffset="0" />
              </svg>
              <div class="pomo-time-display">
                <div class="pomo-time" id="pomoTime">25:00</div>
                <div class="pomo-mode" id="pomoMode">FOCUS</div>
              </div>
            </div>

            <div class="pomo-controls">
              <button class="btn btn-ghost btn-icon" id="pomoReset" aria-label="Reset timer">‚Ü∫</button>
              <button class="btn btn-primary btn-lg" id="pomoStartPause" aria-label="Start or pause timer">Start</button>
              <button class="btn btn-ghost btn-icon" id="pomoSkip" aria-label="Skip to next session">‚á•</button>
            </div>

            <div class="pomo-presets">
              <button class="preset-btn active" data-work="25" data-break="5">25/5</button>
              <button class="preset-btn" data-work="50" data-break="10">50/10</button>
              <button class="preset-btn" data-work="90" data-break="20">90/20</button>
            </div>

            <div class="pomo-task-selector">
              <label class="input-label" for="pomoTaskSelect">Studying:</label>
              <select class="input-field" id="pomoTaskSelect" aria-label="Task to study">
                <option value="">‚Äî Select a task ‚Äî</option>
              </select>
            </div>
          </div>

          <div class="pomo-stats-col">
            <div class="glass pomo-stat-card stagger-1">
              <div class="ps-icon">‚óâ</div>
              <div class="ps-val" id="totalPomoSessions">0</div>
              <div class="ps-label">Total Sessions</div>
            </div>
            <div class="glass pomo-stat-card stagger-2">
              <div class="ps-icon">‚è±</div>
              <div class="ps-val" id="totalPomoMinutes">0</div>
              <div class="ps-label">Minutes Focused</div>
            </div>
            <div class="glass pomo-stat-card stagger-3">
              <div class="ps-icon">‚¨ü</div>
              <div class="ps-val" id="pomoXpEarned">0</div>
              <div class="ps-label">XP Earned</div>
            </div>
          </div>
        </div>
      </section>

      <!-- ANALYTICS VIEW -->
      <section class="view" id="view-analytics">
        <div class="analytics-grid">
          <div class="glass analytics-card stagger-1">
            <div class="card-title">Completion Rate</div>
            <div class="big-stat" id="completionRate">0%</div>
            <div class="analytics-bar-wrap">
              <div class="analytics-bar">
                <div class="analytics-fill" id="completionFill" style="width:0%"></div>
              </div>
            </div>
            <div class="analytics-sub" id="completionSub">0 of 0 tasks complete</div>
          </div>

          <div class="glass analytics-card stagger-2">
            <div class="card-title">Productivity Score</div>
            <div class="big-stat" id="productivityScore">0</div>
            <div class="analytics-sub">Based on streak & completion</div>
            <div class="analytics-bar-wrap">
              <div class="analytics-bar">
                <div class="analytics-fill prod-fill" id="productivityFill" style="width:0%"></div>
              </div>
            </div>
          </div>

          <div class="glass analytics-card stagger-3">
            <div class="card-title">Weekly Study Time</div>
            <div class="big-stat" id="weeklyMinutes">0<span class="unit">m</span></div>
            <div class="analytics-sub">Minutes this week</div>
          </div>

          <div class="glass analytics-card stagger-4">
            <div class="card-title">XP Progress</div>
            <div class="big-stat" id="analyticsXP">0</div>
            <div class="analytics-sub" id="analyticsLevel">Level 1 ‚Äî Novice</div>
            <div class="analytics-bar-wrap">
              <div class="analytics-bar">
                <div class="analytics-fill xp-bar-fill" id="analyticsXpFill" style="width:0%"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="glass analytics-breakdown stagger-3">
          <div class="card-title">Tasks by Priority</div>
          <div class="priority-breakdown" id="priorityBreakdown">
            <div class="pb-row">
              <span class="pb-label priority-high">High</span>
              <div class="analytics-bar flex1"><div class="analytics-fill high-fill" id="highFill" style="width:0%"></div></div>
              <span class="pb-count" id="highCount">0</span>
            </div>
            <div class="pb-row">
              <span class="pb-label priority-medium">Medium</span>
              <div class="analytics-bar flex1"><div class="analytics-fill med-fill" id="medFill" style="width:0%"></div></div>
              <span class="pb-count" id="medCount">0</span>
            </div>
            <div class="pb-row">
              <span class="pb-label priority-low">Low</span>
              <div class="analytics-bar flex1"><div class="analytics-fill low-fill" id="lowFill" style="width:0%"></div></div>
              <span class="pb-count" id="lowCount">0</span>
            </div>
          </div>
        </div>
      </section>

      <!-- ACHIEVEMENTS VIEW -->
      <section class="view" id="view-achievements">
        <div class="achievements-grid" id="achievementsGrid">
          <!-- Rendered by JS -->
        </div>
      </section>

    </main>
  </div>

  <!-- MODALS -->

  <!-- Add Task Modal -->
  <div class="modal-overlay" id="addTaskModal" role="dialog" aria-modal="true" aria-labelledby="addTaskModalTitle">
    <div class="modal glass">
      <div class="modal-header">
        <h2 class="modal-title" id="addTaskModalTitle">Add New Task</h2>
        <button class="modal-close" data-modal="addTaskModal" aria-label="Close modal">‚úï</button>
      </div>
      <div class="modal-body">
        <label class="input-label" for="modalTaskTitle">Title</label>
        <input type="text" class="input-field" id="modalTaskTitle" placeholder="Task title..." />
        <label class="input-label" for="modalTaskSubjectSelect">Subject</label>
        <select class="input-field" id="modalTaskSubjectSelect">
          <option value="">Select subject...</option>
        </select>
        <label class="input-label" for="modalTaskDue">Due Date</label>
        <input type="date" class="input-field" id="modalTaskDue" />
        <label class="input-label" for="modalTaskPriority">Priority</label>
        <select class="input-field" id="modalTaskPriority">
          <option value="low">Low</option>
          <option value="medium" selected>Medium</option>
          <option value="high">High</option>
        </select>
        <label class="input-label" for="modalTaskTime">Estimated Time (minutes)</label>
        <input type="number" class="input-field" id="modalTaskTime" placeholder="30" min="1" />
      </div>
      <div class="modal-footer">
        <button class="btn btn-ghost" data-modal="addTaskModal">Cancel</button>
        <button class="btn btn-primary" id="modalAddTaskBtn">Add Task</button>
      </div>
    </div>
  </div>

  <!-- Add Subject Modal -->
  <div class="modal-overlay" id="addSubjectModal" role="dialog" aria-modal="true" aria-labelledby="addSubjectModalTitle">
    <div class="modal glass">
      <div class="modal-header">
        <h2 class="modal-title" id="addSubjectModalTitle">Add New Subject</h2>
        <button class="modal-close" data-modal="addSubjectModal" aria-label="Close modal">‚úï</button>
      </div>
      <div class="modal-body">
        <label class="input-label" for="subjectName">Subject Name</label>
        <input type="text" class="input-field" id="subjectName" placeholder="e.g. Mathematics..." />
        <label class="input-label">Color</label>
        <div class="color-picker" id="subjectColorPicker">
          <button class="color-dot active" data-color="#7c6af7" style="background:#7c6af7" aria-label="Purple"></button>
          <button class="color-dot" data-color="#f7716a" style="background:#f7716a" aria-label="Red"></button>
          <button class="color-dot" data-color="#45d9a0" style="background:#45d9a0" aria-label="Green"></button>
          <button class="color-dot" data-color="#f7c76a" style="background:#f7c76a" aria-label="Yellow"></button>
          <button class="color-dot" data-color="#6ab8f7" style="background:#6ab8f7" aria-label="Blue"></button>
          <button class="color-dot" data-color="#f76ab8" style="background:#f76ab8" aria-label="Pink"></button>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-ghost" data-modal="addSubjectModal">Cancel</button>
        <button class="btn btn-primary" id="addSubjectBtn">Add Subject</button>
      </div>
    </div>
  </div>

  <!-- Level Up Modal -->
  <div class="modal-overlay" id="levelUpModal" role="dialog" aria-modal="true" aria-labelledby="levelUpTitle">
    <div class="modal glass level-up-modal">
      <div class="level-up-content">
        <div class="level-up-icon">‚¨ü</div>
        <h2 class="level-up-title" id="levelUpTitle">Level Up!</h2>
        <div class="level-up-num" id="levelUpNum">2</div>
        <div class="level-up-name" id="levelUpName">Apprentice</div>
        <button class="btn btn-primary btn-lg" data-modal="levelUpModal">Awesome! ‚ú®</button>
      </div>
      <canvas class="confetti-canvas" id="confettiCanvas"></canvas>
    </div>
  </div>

  <!-- Achievement Toast -->
  <div class="achievement-toast" id="achievementToast" role="status" aria-live="polite">
    <div class="toast-icon">‚¨ü</div>
    <div class="toast-body">
      <div class="toast-title">Achievement Unlocked!</div>
      <div class="toast-name" id="toastName">First Steps</div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
